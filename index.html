<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1" />
  <title>Jutellane Blogs</title>
  <meta name="description" content="Thoughts on AWS, security, startups, and cloud craftsmanship." />
  <link rel="alternate" type="application/rss+xml" title="Jutellane Blogs RSS" href="feed.xml" />
  <style>
    :root{
      --bg: #ffffff; --fg:#0f172a; --muted:#475569; --card:#f8fafc; --chip:#e2e8f0; --link:#2563eb; --br:14px; --max:860px
    }
    @media (prefers-color-scheme: dark){
      :root{ --bg:#0b1020; --fg:#e5e7eb; --muted:#93a3b8; --card:#0f162c; --chip:#1d2644; --link:#7aa3ff }
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.6 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif}
    header{border-bottom:1px solid var(--chip);background:linear-gradient(180deg, rgba(99,102,241,.12), transparent 60%)}
    .wrap{max-width:var(--max);margin:0 auto;padding:28px 20px}
    .brand{display:flex;align-items:center;gap:14px}
    .logo{width:36px;height:36px;border-radius:12px;background:conic-gradient(from 210deg,#60a5fa,#22d3ee,#a78bfa);filter:saturate(1.15)}
    h1{font-size:clamp(22px,4vw,34px);margin:0}
    nav a{color:var(--link);text-decoration:none;margin-left:18px}
    nav a:hover{text-decoration:underline}
    .sub{color:var(--muted);margin-top:6px}
    .controls{display:flex;gap:10px;align-items:center;margin:18px 0 10px}
    .search{flex:1;padding:12px 12px;border:1px solid var(--chip);background:var(--card);color:var(--fg);border-radius:12px;outline:none}
    .rss{padding:10px 14px;border-radius:12px;background:var(--card);border:1px solid var(--chip)}
    section#posts{margin-top:12px}
    ul.postlist{list-style:none;padding:0;margin:0;display:grid;gap:14px}
    .post{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;border-radius:var(--br);background:var(--card);border:1px solid var(--chip)}
    .post a.title{color:var(--fg);text-decoration:none;font-weight:600}
    .post a.title:hover{color:var(--link)}
    .meta{display:flex;gap:10px;align-items:center;color:var(--muted);font-size:14px;flex-wrap:wrap}
    .date{font-variant-numeric:tabular-nums}
    .tags{display:flex;gap:6px;flex-wrap:wrap}
    .tag{font-size:12px;padding:3px 8px;border-radius:999px;background:var(--chip);color:var(--fg);opacity:.9}
    footer{margin-top:40px;border-top:1px solid var(--chip)}
    .tiny{color:var(--muted);font-size:13px}
    .hidden{display:none !important}
  </style>
</head>
<body>
  <header>
    <div class="wrap brand">
      <div class="logo" aria-hidden="true"></div>
      <div>
        <h1>Jutellane Blogs</h1>
        <div class="sub">AWS, Security, Startups — practical notes and patterns.</div>
      </div>
      <nav style="margin-left:auto">
        <a href="feed.xml">RSS</a>
        <a href="sitemap.xml">Sitemap</a>
        <a href="https://github.com/justine6/jutellane-blogs">GitHub</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <div class="controls">
      <input id="q" class="search" type="search" placeholder="Search posts (title or tag)..." autocomplete="off" />
      <a class="rss" href="feed.xml" title="RSS">Subscribe</a>
    </div>

    <section id="posts">
      <h2 class="tiny" style="margin:0 0 8px 2px;">Latest posts</h2>
      <!-- posts:start -->
      <ul class="postlist">
        <!-- Fallback list gets replaced if posts.json is available -->
      </ul>
      <!-- posts:end -->
    </section>

    <footer class="wrap" style="padding:14px 0">
      <div class="tiny">© <span id="y"></span> Jutellane. Built with PowerShell & GitHub Pages.</div>
    </footer>
  </main>

  <script>
    // small helpers
    const $ = s => document.querySelector(s);
    const fmt = d => new Date(d + 'T00:00:00').toLocaleDateString(undefined, {year:'numeric', month:'short', day:'2-digit'});

    // render function (from JSON or from fallback HTML)
    function render(list){
      const ul = document.createElement('ul'); ul.className = 'postlist';
      list.forEach(p=>{
        const li = document.createElement('li'); li.className = 'post';
        const left = document.createElement('div');
        const title = document.createElement('a'); title.className = 'title'; title.href = p.url; title.textContent = p.title;
        const meta = document.createElement('div'); meta.className = 'meta';
        const date = document.createElement('span'); date.className = 'date'; date.textContent = fmt(p.date);
        const tags = document.createElement('span'); tags.className = 'tags';
        (p.tags||[]).forEach(t=>{ const chip = document.createElement('span'); chip.className='tag'; chip.textContent = t; tags.appendChild(chip); });
        meta.append(date, tags);
        left.append(title, meta);
        li.append(left);
        ul.append(li);
      });
      const container = document.querySelector('#posts .postlist');
      container.replaceWith(ul);
    }

    // try to load posts.json; otherwise keep whatever is between the markers
    fetch('posts.json', {cache:'no-store'})
      .then(r => r.ok ? r.json() : Promise.reject())
      .then(data => render(data))
      .catch(()=>{/* fallback: leave the static list alone */});

    // search filter
    const input = $('#q');
    input?.addEventListener('input', () => {
      const q = input.value.trim().toLowerCase();
      document.querySelectorAll('.post').forEach(li=>{
        const text = li.innerText.toLowerCase();
        li.classList.toggle('hidden', q && !text.includes(q));
      });
    });

    // year
    $('#y').textContent = new Date().getFullYear();
  </script>
</body>
</html>
